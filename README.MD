# Power Line Monitoring System Backend

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –¥–µ—Ñ–µ–∫—Ç–æ–≤ –Ω–∞ –ª–∏–Ω–∏—è—Ö —ç–ª–µ–∫—Ç—Ä–æ–ø–µ—Ä–µ–¥–∞—á–∏ (–õ–≠–ü) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è (YOLO11 + ResNet18).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥–µ—Ñ–µ–∫—Ç–æ–≤ –Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è—Ö –õ–≠–ü (YOLO11m)
- üè∑Ô∏è –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π (ResNet18)
- üìç –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–∑ EXIF –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚ö†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π (—à–∫–∞–ª–∞ 1-5)
- üó∫Ô∏è –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π –Ω–∞ –∫–∞—Ä—Ç–µ
- üìã –°–∏—Å—Ç–µ–º–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ —Ä–µ–º–æ–Ω—Ç
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–º –¥–µ—Ñ–µ–∫—Ç–∞–º

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: FastAPI, Python 3.9+
- **–ë–î**: PostgreSQL 15 (async SQLAlchemy + asyncpg)
- **ML**: Ultralytics YOLO11m, PyTorch, torchvision
- **CV**: OpenCV
- **Infrastructure**: Docker (PostgreSQL + pgAdmin)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.9+
- Docker –∏ Docker Compose
- GPU —Å CUDA (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è inference)

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

- git clone https://github.com/your-username/powerline-backend.git
- cd powerline-backend

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL –∏ pgAdmin –≤ Docker

docker-compose up -d

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É:
- PostgreSQL: `localhost:5432`
- pgAdmin: `http://localhost:8080` (admin@example.com / adminpassword)

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python

python -m venv venv

Linux/Mac
source venv/bin/activate

Windows
venv\Scripts\activate

### –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

pip install -r requirements.txt

**requirements.txt:**
- fastapi==0.104.1
- uvicorn[standard]==0.24.0
- sqlalchemy==2.0.23
- asyncpg==0.29.0
- alembic==1.12.1
- python-multipart==0.0.6
- ultralytics==8.3.0
- torch==2.1.0
- torchvision==0.16.0
- opencv-python==4.8.1.78
- pillow==10.1.0
- numpy==1.24.3
- pydantic==2.5.0
- python-dotenv==1.0.0

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

DATABASE_URL=postgresql+asyncpg://myuser:mypassword@localhost:5432/mydatabase

### –®–∞–≥ 6: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

python init_db.py

### –®–∞–≥ 7: –†–∞–∑–º–µ—Å—Ç–∏—Ç—å —Ñ–∞–π–ª—ã –º–æ–¥–µ–ª–µ–π

–ü–æ–º–µ—Å—Ç–∏—Ç–µ –≤–µ—Å–∞ –º–æ–¥–µ–ª–µ–π –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞:
- `best.pt` ‚Äî –≤–µ—Å–∞ YOLO11m
- `defect_classifier_final.pth` ‚Äî –≤–µ—Å–∞ ResNet18 –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞

### –®–∞–≥ 8: –ó–∞–ø—É—Å—Ç–∏—Ç—å backend

- cd app
- uvicorn main:app --reload

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: [**http://localhost:8000**](http://localhost:8000)

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger UI: [**http://localhost:8000/docs**](http://localhost:8000/docs)

## –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ YOLO

–ú–æ–¥–µ–ª—å YOLO11m –æ–±—É—á–µ–Ω–∞ –Ω–∞ –¥–∞—Ç–∞—Å–µ—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –õ–≠–ü:
- **–¢–µ–∫—É—â–∏–π mAP@50**: ~0.79-0.8
- **–¶–µ–ª–µ–≤–æ–π mAP@50**: ‚â•0.85
- **–†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: 640-768px
- **–ö–ª–∞—Å—Å—ã**: –æ–ø–æ—Ä—ã, –ø—Ä–æ–≤–æ–¥–∞, –∏–∑–æ–ª—è—Ç–æ—Ä—ã –∏ –∏—Ö –¥–µ—Ñ–µ–∫—Ç—ã
- **–û–±—É—á–µ–Ω–∏–µ**: Google Colab —Å Tesla T4 GPU

**–°—Å—ã–ª–∫–∞ –Ω–∞ –≤–µ—Å–∞: https://disk.yandex.ru/d/TNRjl_GcB-OoJQ**

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT